<!-- ===========================
     FILE: public/flappybingus.html
     =========================== -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Flappy Bingus</title>
  <style>
    :root{
      --bg0:#070b12;
      --bg1:#0b1220;
      --panel:rgba(10,14,20,.84);
      --panel2:rgba(10,14,20,.62);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --accent:rgba(120,210,255,.95);
      --danger:rgba(255,90,90,.95);
      --ok:rgba(120,255,160,.95);
    }
    html,body{height:100%;margin:0;overflow:hidden;background:linear-gradient(180deg,var(--bg0),var(--bg1));font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text)}
    #wrap{position:fixed;inset:0}
    canvas{position:absolute;inset:0;width:100%;height:100%;display:block;background:#070b12}
    .screen{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none}
    .panel{pointer-events:auto;width:min(980px,calc(100vw - 28px));padding:18px 18px 16px;border-radius:16px;
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(255,255,255,.12);
      box-shadow:0 18px 60px rgba(0,0,0,.55);
      backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);}
    .title{font-weight:950;letter-spacing:.6px;line-height:1.02;font-size:clamp(44px,6vw,74px);margin:6px 0 8px;text-shadow:0 10px 30px rgba(0,0,0,.45)}
    .sub{color:var(--muted);font-size:14.5px;line-height:1.45;margin:0 0 12px}
    .grid{display:grid;grid-template-columns:1.25fr .75fr;gap:14px;align-items:start}
    @media (max-width: 900px){ .grid{grid-template-columns:1fr} }
    .card{border-radius:14px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);padding:12px 12px 10px}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin-top:10px}
    button{appearance:none;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.08);color:var(--text);
      padding:12px 16px;border-radius:12px;font-weight:950;font-size:16px;cursor:pointer;
      box-shadow:0 10px 24px rgba(0,0,0,.35);transition:transform .06s ease,background .12s ease}
    button:hover{background:rgba(255,255,255,.12);transform:translateY(-1px)}
    button:active{transform:translateY(0)}
    button.primary{border-color:rgba(120,210,255,.35);background:rgba(120,210,255,.14)}
    button.primary:hover{background:rgba(120,210,255,.18)}
    button[disabled]{opacity:.55;cursor:not-allowed;transform:none}
    .pill{display:inline-flex;gap:8px;align-items:center;font-size:13px;color:var(--muted);
      border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);padding:7px 10px;border-radius:999px}
    .dot{width:8px;height:8px;border-radius:999px;background:rgba(255,200,120,.95);box-shadow:0 0 14px rgba(255,200,120,.35)}
    .pill.ok .dot{background:var(--ok);box-shadow:0 0 14px rgba(120,255,160,.35)}
    .pill.bad .dot{background:var(--danger);box-shadow:0 0 14px rgba(255,90,90,.35)}
    .pill.neutral .dot{background:rgba(170,170,170,.9);box-shadow:0 0 14px rgba(170,170,170,.25)}
    .stats{margin-top:10px;padding-top:10px;border-top:1px solid rgba(255,255,255,.12);color:var(--muted);font-size:13.5px;line-height:1.55}
    .kbd{display:inline-block;padding:2px 7px;border-radius:8px;border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.06);color:rgba(255,255,255,.85);font-weight:900}
    .hidden{display:none!important}

    .field{display:flex;flex-direction:column;gap:6px}
    .lbl{font-size:12px;color:rgba(255,255,255,.72);font-weight:900;letter-spacing:.3px}
    input[type="text"], select{
      appearance:none;width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.25);color:rgba(255,255,255,.92);font-weight:800;outline:none;
    }
    input[type="text"]::placeholder{color:rgba(255,255,255,.45)}
    .minirow{display:flex;gap:8px;align-items:center}
    .hint{font-size:12.5px;color:rgba(255,255,255,.60);line-height:1.35}
    .hint.good{color:rgba(120,255,160,.80)}
    .hint.bad{color:rgba(255,90,90,.80)}
    .hint.warn{color:rgba(255,210,120,.85)}

    .hsTable{width:100%;border-collapse:collapse;font-size:13.5px}
    .hsTable th,.hsTable td{padding:8px 8px;border-bottom:1px solid rgba(255,255,255,.10);text-align:left}
    .hsTable th{color:rgba(255,255,255,.78);font-weight:950}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}

    .bindList{display:flex;flex-direction:column;gap:8px;margin-top:4px}
    .bindRow{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;
      padding:9px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18)}
    .bindName{font-weight:950;letter-spacing:.2px}
    .bindKey{justify-self:end}
    .bindBtn{padding:8px 10px;border-radius:10px;font-size:13px}
    .bindRow.listen{border-color:rgba(120,210,255,.40);box-shadow:0 0 0 3px rgba(120,210,255,.12) inset}
  </style>
</head>
<body>
<div id="wrap">
  <canvas id="c"></canvas>

  <div id="menu" class="screen">
    <div class="panel">
      <div class="title">Flappy Bingus</div>
      <p class="sub">
        Register a username to track progression, unlock trails, and appear on the global leaderboard.
        New? Play the <span class="kbd">Tutorial</span> to learn movement, scoring, perfect gaps, and every skill.
      </p>

      <div class="grid">
        <div class="card">
          <div class="row" style="margin-top:0">
            <button id="start" class="primary" disabled>Start</button>
            <button id="tutorial" disabled>Tutorial</button>
            <div id="bootPill" class="pill"><span class="dot"></span><span id="bootText">Loading…</span></div>
          </div>

          <div style="height:10px"></div>

          <div class="field">
            <div class="lbl">Username</div>
            <div class="minirow">
              <input id="usernameInput" type="text" maxlength="18" placeholder="3–18 chars: letters, numbers, space, _ or -"/>
              <button id="saveUserBtn">Save</button>
            </div>
            <div id="userHint" class="hint">Not signed in.</div>
          </div>

          <div style="height:10px"></div>
<div style="height:10px"></div>

<div class="field">
  <div class="lbl">Level Seed (optional)</div>
  <div class="minirow">
    <input id="seedInput" type="text" maxlength="48" placeholder="Leave blank for random (share seed to play same level)"/>
    <button id="seedRandomBtn">Random</button>
  </div>
  <div id="seedHint" class="hint">If two players use the same seed, pipe/orb spawns will match.</div>
</div>
          <div class="field">
            <div class="lbl">Cosmetic Trail</div>
            <select id="trailSelect"></select>
            <div id="trailHint" class="hint">Unlock trails by improving your personal best.</div>
          </div>

          <div style="height:10px"></div>

          <div class="field">
            <div class="lbl">Skill Keybinds</div>
            <div id="bindWrap" class="bindList"></div>
            <div id="bindHint" class="hint">Click Rebind, then press a key or click a mouse button. Press Esc to cancel.</div>
          </div>

          <div class="stats">
            Move: <span class="kbd">W</span> <span class="kbd">A</span> <span class="kbd">S</span> <span class="kbd">D</span>.
            <br/>
            Orbs give points + combo. If any orb despawns, combo breaks.
            <br/>
            Perfect Thread: pass the exact center of a gap when it crosses you.
            <br/>
            Personal best: <span class="kbd" id="pbText">0</span> • Trail: <span class="kbd" id="trailText">classic</span>
          </div>
        </div>

        <div class="card">
          <div class="row" style="margin-top:0">
            <div style="font-weight:950;letter-spacing:.3px">High Scores</div>
            <a href="/highscores" style="color:rgba(120,210,255,.95);text-decoration:none;font-weight:900;font-size:13px">Full list</a>
          </div>
          <div style="height:8px"></div>
          <div id="hsWrap" class="hint">Loading leaderboard…</div>
        </div>
      </div>
    </div>
  </div>

  <div id="over" class="screen hidden">
    <div class="panel">
      <div class="title" style="color:var(--danger)">GAME OVER</div>
      <p class="sub">One collision = instant death. Gameplay is frozen.</p>
      <div class="stats">
        Final score: <span class="kbd" id="final">0</span><br/>
        Personal best: <span class="kbd" id="overPB">0</span>
      </div>
    <div class="row" style="margin-top:14px">
     <button id="restart">Restart (new seed)</button>
    <button id="retrySeed">Retry Previous Seed</button>
     <button id="toMenu">Main Menu</button>
     <button id="watchReplay">Watch Replay</button>
     <button id="exportGif" display="none" disabled>Export GIF</button>
     <button id="exportMp4" display="none" disabled>Export MP4</button>
   </div>

<div id="replayStatus" class="hint" style="margin-top:10px">Replay will be available after a run.</div>
      </div>
      <div class="stats">Shortcuts: <span class="kbd">R</span> restart, <span class="kbd">Esc</span> menu.</div>
    </div>
  </div>
</div>

<script type="module" src="/js/main.js"></script>
</body>
</html>
